<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="og:image" content="https://a.top4top.io/p_3097lgtbw0.jpg">
    <link rel="shortcut icon" href="https://a.top4top.io/p_3097lgtbw0.jpg" type="image/x-icon" />
    <title>Aroo-Game</title>
    <link href="styles.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            background-color: #f9f7f4;
            margin: 0;
            padding: 0;
        }
        header {
            background-color: #50394c;
            color: #fff;
            text-align: center;
            padding: 20px 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        a {
            text-decoration: none;
        }
        .Aroo {
            color: #fff;
            text-decoration: none;
            position: relative;
            left: 72px;
        }
        .game-name {
          position: relative;
          right: 36px;
          top: 25px;
        }
        .profile {
            gap: 10px;
            display: flex;
            align-items: center;
        }
        .profile img {
            position: relative;
            left: 72px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
        }
        nav {
            background-color: #735f6d;
            padding: 10px;
            text-align: center;
        }
        nav a {
            color: #fff;
            text-decoration: none;
            margin: 0 10px;
        }
        nav a:hover {
            text-decoration: underline;
        }
.warning {
    text-align: center;
    font-size: 20px;
    color: crimson;
    background-color: black;
    font-weight: bold;
    width: 100%;
    padding: 10px;
    box-sizing: border-box; /* Ensure padding does not add to element's total width */
}

.player {
    width: 10px; /* Lebar pemain (player) */
    height: 30px; /* Tinggi pemain (player) */
    background-color: #735f6d; /* Warna pemain (player) */
}

canvas {
    background-color: #f0f0f0;
    border: 2px solid #50394c;
    border-radius: 8px;
    margin-top: 20px;
    max-width: 100%; /* Pastikan canvas tidak melebihi lebar kontainer */
}

.score {
    text-align: center;
    font-size: 24px;
    color: #50394c;
    font-weight: bold;
    margin-top: 20px;
}
#score {
  color: crimson;
}
.controls {
    text-align: center;
    margin-top: 20px;
}

.controls button {
    padding: 10px 20px;
    margin: 0 10px;
    background-color: #50394c;
    color: #fff;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}

.controls button:hover {
    background-color: #735f6d;
}

.restart-button {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    display: none;
    background-color: rgba(255, 255, 255, 0.8);
    padding: 20px;
    border-radius: 10px;
    text-align: center;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
}

.restart-button button {
    padding: 10px 20px;
    background-color: #50394c;
    color: #fff;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}

.restart-button button:hover {
    background-color: #735f6d;
}

.start-button {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: rgba(255, 255, 255, 0.8);
    padding: 20px;
    border-radius: 10px;
    text-align: center;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
}

.start-button button {
    padding: 10px 20px;
    background-color: #50394c;
    color: #fff;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}

.start-button button:hover {
    background-color: #735f6d;
}

.play, .again {
  position: relative;
  bottom: 6px;
}

        #connection-lost {
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #1e1e1e;
            color: #b0b0b0;
            text-align: center;
            z-index: 1000;
        }
        #connection-lost h1 {
            font-size: 2.5em;
            margin: 20px 0;
            color: #f0f0f0;
        }
        #connection-lost p {
            font-size: 1.2em;
            margin: 10px 0 20px 0;
        }
        #connection-lost .error-icon {
            width: 100px;
            height: auto;
            margin-bottom: 20px;
        }
        #connection-lost .material-icons {
            font-size: 4em;
            color: #f0f0f0;
        }
    </style>
</head>
<body>
    <header id="header">
        <div class="profile">
            <img src="https://a.top4top.io/p_3097lgtbw0.jpg" alt="Foto Profil">
                        <a class="Aroo" href="aroo_game.html"><h1>Aroo-Game</a><br></h1><br>
                        <p class="game-name"><i>Falling Block</i></p>
        </div>
    </header>
    <nav id="nav">
        <a href="index.html">Home</a>
        <a href="about.html">About</a>
        <a href="contact.html">Contact</a>
        <a href="aroo_game.html">Game</a>
    </nav>
    <div class="warning">Jangan sampai tertimpa blok!</div>
    <div class="score">Score : <span id="score">0</span></div>
    <canvas id="gameCanvas" width="400" height="400"></canvas>
    <div class="controls">
        <button id="moveLeft"><i class="material-icons">chevron_left</i></button>
        <button id="moveRight"><i class="material-icons">chevron_right</i></button>
    </div>
    <div class="start-button">
        <button id="start"><i class="material-icons">play_arrow</i> <span class="play">Play</span></button>
    </div>
    <div class="restart-button">
        <button id="restart"><i class="material-icons">refresh</i> <span class="again">Again</span></button>
    </div>
    <p align="center" style="color: #777;">V1.1.1</p>
        <div id="connection-lost">
        <img src="signal_wifi_off.png" alt="WiFi Off" class="error-icon">
        <h1>Connection Lost</h1>
        <p>No Connection. Try again later.</p>
    </div>
    <script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

const playerWidth = 5; // Lebar pemain (player)
const playerHeight = 40; // Tinggi pemain (player)
const obstacleSize = 30; // Ukuran rintangan (obstacle)
const playerSpeed = 5; // Kecepatan pemain (player)

let player = {
    x: canvas.width / 2 - playerWidth / 2,
    y: canvas.height - playerHeight - 10,
    width: playerWidth,
    height: playerHeight,
    color: '#735f6d'
};

let obstacles = [];
let score = 0;
let gameInterval;
let gameSpeed = 2;
let gameRunning = false;
let leftPressed = false;
let rightPressed = false;

const obstacleColors = ['#ff6347', '#4682b4', '#32cd32', '#ffd700', '#ff69b4'];

function drawPlayer() {
    ctx.fillStyle = player.color;
    ctx.fillRect(player.x, player.y, player.width, player.height);
}

function drawObstacles() {
    obstacles.forEach(obstacle => {
        ctx.fillStyle = obstacle.color;
        ctx.fillRect(obstacle.x, obstacle.y, obstacle.width, obstacle.height);
    });
}

function clearCanvas() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
}

function updateObstacles() {
    obstacles.forEach((obstacle, index) => {
        obstacle.y += gameSpeed;
        if (obstacle.y > canvas.height) {
            obstacles.splice(index, 1);
            score++;
            document.getElementById('score').textContent = score;
        }

        if (detectCollision(obstacle, player)) {
            endGame();
        }
    });
}

function detectCollision(obstacle, player) {
    let playerLeft = player.x;
    let playerRight = player.x + player.width;
    let playerTop = player.y;
    let playerBottom = player.y + player.height;

    let obstacleLeft = obstacle.x;
    let obstacleRight = obstacle.x + obstacle.width;
    let obstacleTop = obstacle.y;
    let obstacleBottom = obstacle.y + obstacle.height;

    return !(playerBottom < obstacleTop || playerTop > obstacleBottom || playerRight < obstacleLeft || playerLeft > obstacleRight);
}

function spawnObstacle() {
    const x = Math.random() * (canvas.width - obstacleSize);
    const y = -obstacleSize;
    const color = obstacleColors[Math.floor(Math.random() * obstacleColors.length)];
    obstacles.push({ x, y, width: obstacleSize, height: obstacleSize, color });
}

function updateGameArea() {
    clearCanvas();
    drawPlayer();
    drawObstacles();
    updateObstacles();
    movePlayer();
}

function movePlayer() {
    if (leftPressed && player.x > 0) {
        player.x -= playerSpeed;
    }
    if (rightPressed && player.x + player.width < canvas.width) {
        player.x += playerSpeed;
    }
}

function startGame() {
    if (!gameRunning) {
        gameRunning = true;
        score = 0;
        document.getElementById('score').textContent = score;
        player.x = canvas.width / 2 - player.width / 2;
        obstacles = [];
        gameInterval = setInterval(() => {
            updateGameArea();
            if (Math.random() < 0.05) {
                spawnObstacle();
            }
        }, 1000 / 60);
        document.querySelector('.restart-button').style.display = 'none';
        document.querySelector('.start-button').style.display = 'none';
        document.getElementById('header').style.display = 'none'; // Hide header
        document.getElementById('nav').style.display = 'none'; // Hide nav
    }
}

function endGame() {
    clearInterval(gameInterval);
    gameRunning = false;
    document.querySelector('.restart-button').style.display = 'block';
    document.getElementById('header').style.display = 'block'; // Show header
    document.getElementById('nav').style.display = 'block'; // Show nav
}

function restartGame() {
    obstacles = [];
    score = 0;
    document.getElementById('score').textContent = score;
    gameRunning = false;
    clearInterval(gameInterval);
    startGame();
    document.querySelector('.restart-button').style.display = 'none';
    document.querySelector('.start-button').style.display = 'none'; // Hide start button when restarting
}

document.addEventListener('keydown', (event) => {
    if (event.key === 'ArrowLeft' || event.key === 'a') {
        leftPressed = true;
    } else if (event.key === 'ArrowRight' || event.key === 'd') {
        rightPressed = true;
    }
});

document.addEventListener('keyup', (event) => {
    if (event.key === 'ArrowLeft' || event.key === 'a') {
        leftPressed = false;
    } else if (event.key === 'ArrowRight' || event.key === 'd') {
        rightPressed = false;
    }
});

document.getElementById('moveLeft').addEventListener('mousedown', () => {
    leftPressed = true;
});

document.getElementById('moveRight').addEventListener('mousedown', () => {
    rightPressed = true;
});

document.getElementById('moveLeft').addEventListener('mouseup', () => {
    leftPressed = false;
});

document.getElementById('moveRight').addEventListener('mouseup', () => {
    rightPressed = false;
});

document.getElementById('moveLeft').addEventListener('touchstart', () => {
    leftPressed = true;
});

document.getElementById('moveRight').addEventListener('touchstart', () => {
    rightPressed = true;
});

document.getElementById('moveLeft').addEventListener('touchend', () => {
    leftPressed = false;
});

document.getElementById('moveRight').addEventListener('touchend', () => {
    rightPressed = false;
});

document.getElementById('restart').addEventListener('click', restartGame);
document.getElementById('start').addEventListener('click', startGame);

// Initial display
document.querySelector('.restart-button').style.display = 'none'; // Hide restart button initially
document.getElementById('header').style.display = 'block'; // Ensure header is shown initially
document.getElementById('nav').style.display = 'block'; // Ensure nav is shown initially

        function checkConnection() {
            const connectionLostDiv = document.getElementById('connection-lost');
            if (!navigator.onLine) {
                connectionLostDiv.style.display = 'flex';
            } else {
                connectionLostDiv.style.display = 'none';
            }
        }
        window.addEventListener('load', checkConnection);
        window.addEventListener('online', checkConnection);
        window.addEventListener('offline', checkConnection);
    </script>
</body>
</html>